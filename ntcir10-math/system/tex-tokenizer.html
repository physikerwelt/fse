<!DOCTYPE html>
<!--[if lt IE 7]><html class="lt-ie9 lt-ie8 lt-ie7" lang="en" dir="ltr"><![endif]-->
<!--[if IE 7]><html class="lt-ie9 lt-ie8" lang="en" dir="ltr"><![endif]-->
<!--[if IE 8]><html class="lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]><!--><html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema#"><!--<![endif]-->
<style type="text/css">
.ln { color: #606366; font-weight: normal; font-style: normal; }
.s0 { color: rgb(204,120,50); }
.s1 { color: rgb(169,183,198); }
.s2 { color: rgb(106,135,89); }
.s3 { color: rgb(98,151,85); font-style: italic; }
.s4 { color: rgb(98,151,85); font-weight: bold; font-style: italic; }
.s5 { color: rgb(128,128,128); }
</style>
<head>
<meta charset="utf-8" />
<link rel="shortcut icon" href="/sites/formulasearchengine.com/files/FSE-PIC.PNG" type="image/png" />
<link rel="shortlink" href="/node/145" />
<link rel="canonical" href="/ntcir10-math/system/tex-tokenizer" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<title>TeX Toknizer | Formulasearchengine</title>
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_xE-rWrJf-fncB6ztZfd2huxqgxu4WO-qwma6Xer30m4.css" media="all" />
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_WQh4s2Yd3AZkoJ-2KGYZENmskdvBzcmhTkpVog99f3E.css" media="all" />
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_2Wfk5pCqGT8q0NyoUZP1fUQ65ZnhAfBrMog9FnkzVRo.css" media="all" />
<style>body.snf-gwf-open-sans #site-name{font-family :'Open Sans'}
body.ssf-gwf-open-sans #site-slogan{font-family:'Open Sans'}
body.ptf-gwf-open-sans #page-title{font-family:'Open Sans'}
body.ntf-gwf-open-sans .article-title{font-family:'Open Sans'}
body.ctf-gwf-open-sans .comment-title{font-family:'Open Sans'}
body.btf-gwf-open-sans .block-title{font-family:'Open Sans'}
.flexible-slideshow,.flexible-slideshow .article-inner,.flexible-slideshow .article-content,.flexslider{max-width:940px;}
</style>
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_KGZcOm3i1wmtbgZsjo-3V9FM4wZ-5UDcpJ7Vfzmt45E.css" media="all" />
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_smWejqFexB_rDFKKSWlAeBFeL0wXW7QAXc0ERqON49Y.css" media="screen" />
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_9PqsK5c8l6O9eoDwm8W__UNdTYFwn8aMZ4GMFLgvgVw.css" media="all" />
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_JDGN2tj7-5rvqMs9iPiy4ZeQPSffJTJiO7ZCBBh0-dU.css" media="screen" />
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_BxuDEykWghfZVC4C4Lkw6QqG-soNPtesMdvs8oYCTYw.css" media="all" />
<link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans" media="all" />
<!--[if IE 6]>
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs.css" media="screen" />
<![endif]-->
<!--[if lte IE 7]>
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_F5dDLDDznkN461Wcixy86a2AxU-sZUFzvmM3dKEfGMM.css" media="screen" />
<![endif]-->
<!--[if IE 8]>
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_yNGa1BdQKp2VqshF_KAN7MUZ4pGvnVgIT1gkuR4s1Ms.css" media="screen" />
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/sites/formulasearchengine.com/files/css/css_AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs.css" media="screen" />
<![endif]-->
<script src="/sites/formulasearchengine.com/files/js/js_UWQINlriydSoeSiGQxToOUdv493zEa7dpsXC1OtYlZU.js"></script>
<script src="/sites/formulasearchengine.com/files/js/js_wvSwZjuROhqJRov2lJssS494cnGtmn15BhEbCLMK1yo.js"></script>
<script src="http://dygraphs.com/dygraph-combined.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"at_commerce","theme_token":"RihFA_5NsHPQ0VscCMjTHZioe_lTHE9uAWZPH6Y5TLQ","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/themes\/at-commerce\/js\/jquery.flexslider-min.js":1,"sites\/all\/themes\/at-commerce\/js\/slider.options.js":1,"sites\/all\/themes\/at-commerce\/js\/draw.js":1,"sites\/all\/libraries\/superfish\/jquery.hoverIntent.minified.js":1,"sites\/all\/libraries\/superfish\/sfsmallscreen.js":1,"sites\/all\/libraries\/superfish\/superfish.js":1,"sites\/all\/libraries\/superfish\/supersubs.js":1,"sites\/all\/modules\/superfish\/superfish.js":1,"http:\/\/dygraphs.com\/dygraph-combined.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/poll\/poll.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"sites\/all\/libraries\/superfish\/css\/superfish.css":1,"sites\/all\/themes\/adaptivetheme\/at_core\/css\/at.layout.css":1,"sites\/all\/themes\/at-commerce\/css\/styles.base.css":1,"sites\/all\/themes\/at-commerce\/css\/styles.modules.css":1,"sites\/all\/themes\/at-commerce\/css\/styles.settings.css":1,"sites\/all\/themes\/at-commerce\/color\/colors.css":1,"sites\/all\/themes\/at-commerce\/css\/styles.slideshow.css":1,"sites\/all\/themes\/at-commerce\/css\/at_commerce.responsive.style.css":1,"sites\/all\/themes\/at-commerce\/css\/at_commerce.responsive.gpanels.css":1,"\/\/fonts.googleapis.com\/css?family=Open+Sans":1,"sites\/all\/themes\/at-commerce\/css\/ie-6.css":1,"sites\/all\/themes\/at-commerce\/css\/ie-lte-7.css":1,"sites\/all\/themes\/at-commerce\/css\/ie-8.css":1,"sites\/all\/themes\/at-commerce\/css\/ie-lte-9.css":1}},"urlIsAjaxTrusted":{"\/search\/node":true},"superfish":[{"id":"1","sf":{"animation":{"opacity":"show"},"speed":"\u0027fast\u0027","autoArrows":false,"dropShadows":true,"disableHI":false},"plugins":{"smallscreen":{"mode":"window_width","addSelected":false,"menuClasses":false,"hyperlinkClasses":false,"title":"Main menu"},"supposition":false,"bgiframe":false,"supersubs":{"minWidth":"12","maxWidth":"27","extraWidth":1}}},{"id":"2","sf":{"animation":{"opacity":"show"},"speed":"\u0027fast\u0027","autoArrows":false,"dropShadows":true,"disableHI":false},"plugins":{"smallscreen":{"mode":"window_width","addSelected":false,"menuClasses":false,"hyperlinkClasses":false,"title":"Administration"},"supposition":false,"bgiframe":false,"supersubs":{"minWidth":"12","maxWidth":"27","extraWidth":1}}}],"adaptivetheme":{"at_commerce":{"layout_settings":{"bigscreen":"three-col-grail","tablet_landscape":"three-col-grail","tablet_portrait":"one-col-vert"},"media_query_settings":{"bigscreen":"only screen and (min-width:1025px)","tablet_landscape":"only screen and (min-width:769px) and (max-width:1024px)","tablet_portrait":"only screen and (min-width:481px) and (max-width:768px)"}}}});</script>
</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-145 node-type-article atv-7.x-2.0-rc3 site-name-formulasearchengine section-ntcir10-math color-scheme-default at-commerce  fs-medium bb-n hl-l mb-dd mma-l ia-c snc-n snw-n sna-l sns-n ssc-n ssw-n ssa-l sss-n ptc-n ptw-n pta-l pts-n ntc-n ntw-n nta-l nts-n ctc-n ctw-n cta-l cts-n btc-uc btw-n bta-l bts-n itrc-0 isrc-6 bf-l snf-gwf-open-sans ssf-gwf-open-sans mmf-sss ptf-gwf-open-sans ntf-gwf-open-sans ctf-gwf-open-sans btf-gwf-open-sans hide-ss-nav">
  <div id="skip-link" class="nocontent">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page-wrapper"><div id="page">
  <div id="header-wrapper">
    <div class="container clearfix">
      <header class="clearfix">
        <div id="branding" class="clearfix with-logo with-site-name with-site-slogan">
                      <div id="logo"><a href="/"><img class="site-logo" typeof="foaf:Image" src="/sites/formulasearchengine.com/files/FSE-Medium.png" alt="Formulasearchengine" /></a></div>
                      <hgroup>
                              <h1 id="site-name"><a href="/" title="Home page">Formulasearchengine</a></h1>
                                            <h2 id="site-slogan">Making math - the language of science - searchable</h2>
                          </hgroup>
                  </div>
                  <div id="nav-wrapper"><div id="menu-bar" class="nav clearfix"><nav id="block-superfish-1" class="block block-superfish menu-wrapper menu-bar-wrapper clearfix odd first last block-count-1 block-region-menu-bar block-1" >
      <h2 class="element-invisible block-title element-invisible">Main menu</h2>
  <ul id="superfish-1" class="menu sf-menu sf-main-menu sf-horizontal sf-style-none sf-total-items-8 sf-parent-items-2 sf-single-items-6"><li id="menu-230-1" class="first odd sf-item-1 sf-depth-1 sf-no-children"><a href="/" class="sf-depth-1">Home</a></li><li id="menu-452-1" class="middle even sf-item-2 sf-depth-1 sf-total-children-4 sf-parent-children-0 sf-single-children-4 menuparent"><a href="/installation" class="sf-depth-1 menuparent">Installation</a><ul><li id="menu-445-1" class="first odd sf-item-1 sf-depth-2 sf-no-children"><a href="/installation/MediaWiki" class="sf-depth-2">MediaWiki</a></li><li id="menu-441-1" class="middle even sf-item-2 sf-depth-2 sf-no-children"><a href="/mwsd" title="How to install mwsd" class="sf-depth-2">MathWeb Search</a></li><li id="menu-440-1" class="middle odd sf-item-3 sf-depth-2 sf-no-children"><a href="/lucene-install" title="How to install Lucene-search" class="sf-depth-2">Lucene</a></li><li id="menu-498-1" class="last even sf-item-4 sf-depth-2 sf-no-children"><a href="/LaTeXML" class="sf-depth-2">LaTeXML</a></li></ul></li><li id="menu-442-1" class="middle odd sf-item-3 sf-depth-1 sf-no-children"><a href="/node" title="" class="sf-depth-1">Article List</a></li><li id="menu-524-1" class="middle even sf-item-4 sf-depth-1 sf-no-children"><a href="/Mathematical%20Language%20Processing" title="Mathematical Language Processing" class="sf-depth-1">MLP</a></li><li id="menu-706-1" class="middle odd sf-item-5 sf-depth-1 sf-no-children"><a href="/mathoid" class="sf-depth-1">Mathoid</a></li><li id="menu-623-1" class="middle even sf-item-6 sf-depth-1 sf-total-children-1 sf-parent-children-0 sf-single-children-1 menuparent"><a href="/ntcir10-math" class="sf-depth-1 menuparent">NTCIR10</a><ul><li id="menu-624-1" class="firstandlast odd sf-item-1 sf-depth-2 sf-no-children"><a href="/ntcir10-math/results/overview" title="Provides an Overview about the Results." class="sf-depth-2">Results</a></li></ul></li><li id="menu-705-1" class="middle odd sf-item-7 sf-depth-1 sf-no-children"><a href="/review" title="How to review the MediaWiki Math extension" class="sf-depth-1">REVIEW</a></li><li id="menu-704-1" class="last even sf-item-8 sf-depth-1 sf-no-children"><a href="/texvccheck" class="sf-depth-1">texvccheck</a></li></ul>
  </nav></div></div>
      </header>
    </div>
  </div>
  <div id="content-wrapper" class="no-secondary"><div class="container">
    <div id="columns"><div class="columns-inner clearfix">
      <div id="content-column"><div class="content-inner">
                <section id="main-content">
          <div id="content"><div id="block-system-main" class="block block-system no-title odd first last block-count-2 block-region-content block-main" >
  <article id="article-145" class="node node-article node-promoted article odd node-full clearfix" about="/ntcir10-math/system/tex-tokenizer" typeof="sioc:Item foaf:Document" role="article">
  <div class="article-inner clearfix">
              <header class="clearfix">
                  <h1 class="node-title">
                          TeX Toknizer                      </h1>
                  <div class="submitted"><span property="dc:date dc:created" content="2013-04-01T18:05:03+02:00" datatype="xsd:dateTime" rel="sioc:has_creator">Submitted by <span class="username" xml:lang="" about="/user/1" typeof="sioc:UserAccount" property="foaf:name" datatype="">schubotz</span> on <time datetime="2013-04-01T18:05:03+0200" pubdate="pubdate">Mon, 04/01/2013 - 18:05</time></span></div>
      </header>
        <span property="dc:title" content="TeX Toknizer" class="rdf-meta element-hidden"></span><span property="sioc:num_replies" content="0" datatype="xsd:integer" class="rdf-meta element-hidden"></span>
    <div class="node-content clearfix">
    <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded">The TeX Tokenizer is based on the standard java tokenizer and transforms a TeX string to a multiset of tokens discoverd in the text.
It is also used to transofrm TeXQuers as e.g. <a href="/ntcir10-math/results/FT/NTCIR10-FT-14">\sum\qvar{p}_{n}\qvar{a}_{n}</a> to a so called <em>TeX-Filter</em>.
A similar function transform Presentation MathML to a multiset of Presentation MathML tokens. (see <a href="/ntcir10-math/system/presentation-mathml-tokenizer">PMML-Tokenizer</a>)
<pre style="background-color:#2b2b2b;">
<a name="l1"><span class="ln">1    </span></a><span class="s0">import </span><span class="s1">java.util.StringTokenizer</span><span class="s0">;</span><span class="s1">
<a name="l2"><span class="ln">2    </span></a>
<a name="l3"><span class="ln">3    </span></a></span><span class="s0">import </span><span class="s1">org.apache.commons.lang.StringEscapeUtils</span><span class="s0">;</span><span class="s1">
<a name="l4"><span class="ln">4    </span></a></span><span class="s0">import </span><span class="s1">com.google.common.collect.HashMultiset</span><span class="s0">;</span><span class="s1">
<a name="l5"><span class="ln">5    </span></a></span><span class="s0">import </span><span class="s1">com.google.common.collect.Multiset</span><span class="s0">;</span><span class="s1">
<a name="l6"><span class="ln">6    </span></a>
<a name="l7"><span class="ln">7    </span></a></span><span class="s0">public final class </span><span class="s1">classname {
<a name="l8"><span class="ln">8    </span></a>    </span><span class="s0">private static final </span><span class="s1">String TEX_SEPERATORS = </span><span class="s2">&quot;</span><span class="s0">\\</span><span class="s2">()[]+-*:1234567890,; |</span><span class="s0">\t</span><span class="s2">=_^*/.~!&lt;&gt;&amp;</span><span class="s0">\&quot;</span><span class="s2">&quot;</span><span class="s0">;</span><span class="s1">
<a name="l9"><span class="ln">9    </span></a>
<a name="l10"><span class="ln">10   </span></a>    </span><span class="s3">/**
<a name="l11"><span class="ln">11   </span></a>     * Creates a multiset of tokens extracted from a TeX input String.
<a name="l12"><span class="ln">12   </span></a>     * If the input contains HTML-entities (e.g &lt;) they are converted to the corresponding
<a name="l13"><span class="ln">13   </span></a>     * characters (e.g. &lt;). The sTeX command \qvar is ignored.
<a name="l14"><span class="ln">14   </span></a>     *
<a name="l15"><span class="ln">15   </span></a>     * </span><span class="s4">@param </span><span class="s3">tex the TeX input
<a name="l16"><span class="ln">16   </span></a>     * </span><span class="s4">@return </span><span class="s3">the Multiset of the tokens
<a name="l17"><span class="ln">17   </span></a>     */</span><span class="s1">
<a name="l18"><span class="ln">18   </span></a>    </span><span class="s0">public static </span><span class="s1">Multiset TeX2TokenBag(</span><span class="s0">final </span><span class="s1">String tex) {
<a name="l19"><span class="ln">19   </span></a>        Multiset out = HashMultiset.create()</span><span class="s0">;</span><span class="s1">
<a name="l20"><span class="ln">20   </span></a>        String newtex = StringEscapeUtils.unescapeHtml(tex)</span><span class="s0">;</span><span class="s1">
<a name="l21"><span class="ln">21   </span></a>        newtex = newtex.replaceAll(</span><span class="s2">&quot;</span><span class="s0">\\\\</span><span class="s2">qvar</span><span class="s0">\\</span><span class="s2">{(.*?)</span><span class="s0">\\</span><span class="s2">}&quot;</span><span class="s0">, </span><span class="s2">&quot;&quot;</span><span class="s1">)</span><span class="s0">; </span><span class="s5">//remove qvar</span><span class="s1">
<a name="l22"><span class="ln">22   </span></a>        newtex = newtex.replace(</span><span class="s2">&quot;{&quot;</span><span class="s0">, </span><span class="s2">&quot; &quot;</span><span class="s1">)</span><span class="s0">; </span><span class="s5">//ignore curly braces</span><span class="s1">
<a name="l23"><span class="ln">23   </span></a>        newtex = newtex.replace(</span><span class="s2">&quot;}&quot;</span><span class="s0">, </span><span class="s2">&quot; &quot;</span><span class="s1">)</span><span class="s0">;</span><span class="s1">
<a name="l24"><span class="ln">24   </span></a>        StringTokenizer tok = </span><span class="s0">new </span><span class="s1">StringTokenizer(newtex</span><span class="s0">, </span><span class="s1">TEX_SEPERATORS</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">;</span><span class="s1">
<a name="l25"><span class="ln">25   </span></a>        </span><span class="s0">while </span><span class="s1">(tok.hasMoreTokens()) {
<a name="l26"><span class="ln">26   </span></a>            out.add(tok.nextToken())</span><span class="s0">;</span><span class="s1">
<a name="l27"><span class="ln">27   </span></a>        } </span><span class="s5">//Remove spaces sequence</span><span class="s1">
<a name="l28"><span class="ln">28   </span></a>        out.remove(</span><span class="s2">&quot; &quot;</span><span class="s0">, </span><span class="s1">Integer.MAX_VALUE)</span><span class="s0">;</span><span class="s1">
<a name="l29"><span class="ln">29   </span></a>        </span><span class="s0">return </span><span class="s1">out</span><span class="s0">;</span><span class="s1">
<a name="l30"><span class="ln">30   </span></a>    }
<a name="l31"><span class="ln">31   </span></a>}</span></pre>
	    </div></div></div><section class="field field-name-field-tags field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tags:&nbsp;</h2><ul class="field-items"><li class="field-item even" rel="dc:subject"><a href="/taxonomy/term/28" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">TeX</a></li><li class="field-item odd" rel="dc:subject"><a href="/taxonomy/term/29" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Java</a></li><li class="field-item even" rel="dc:subject"><a href="/taxonomy/term/30" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Tokenizer</a></li><li class="field-item odd" rel="dc:subject"><a href="/taxonomy/term/31" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">NTCIR System</a></li><li class="field-item even" rel="dc:subject"><a href="/taxonomy/term/32" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">TeX-Filter</a></li></ul></section>    </div>
          <nav class="clearfix"><ul class="links"><li class="comment_forbidden first last"><span><a href="/user/login?destination=node/145%23comment-form">Log in</a> to post comments</span></li></ul></nav>
  </div>
</article>
  </div></div>
        </section>
      </div></div>
    </div></div>
  </div></div>
  <div id="page-footer">
          <div id="footer-panels-wrapper"><div class="container clearfix">
        <div class="four-4x25 gpanel clearfix">
                                        <div class="region region-four-fourth"><div class="region-inner clearfix"><div id="block-block-1" class="block block-block no-title odd first last block-count-3 block-region-four-fourth block-1" ><div class="block-inner clearfix">
  <div class="block-content content no-title"><p>By <a href="mailto:info@formulasearchengine.com">Moritz Schubotz</a>, Berlin 2012 (<a href="https://plus.google.com/u/0/104541687836095789339?&lt;br /&gt;&#10;   rel=author">g+</a>)</p>
</div>
  </div></div></div></div>        </div>
      </div></div>
          <div id="footer-wrapper"><div class="container clearfix">
        <footer class="clearfix">
          <div class="region region-footer"><div class="region-inner clearfix"><nav id="block-superfish-2" class="block block-superfish no-title odd first last block-count-4 block-region-footer block-2" ><div class="block-inner clearfix">
  <div class="block-content content clearfix no-title"><ul id="superfish-2" class="menu sf-menu sf-menu-administration sf-horizontal sf-style-none sf-total-items-1 sf-parent-items-0 sf-single-items-1"><li id="menu-450-2" class="firstandlast odd sf-item-1 sf-depth-1 sf-no-children"><a href="/Impressum" title="Legeal notices" class="sf-depth-1">Impressum</a></li></ul></div>
  </div></nav></div></div>        </footer>
     </div></div>
      </div>
</div></div>
  </body>
</html>
